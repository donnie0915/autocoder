<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- Always ensure to use the correct XML header as above! -->
<sqlMap namespace="OriginPage">
<typeAlias alias="originPage" type="com.hqb360.analysis.report.domain.entity.OriginPage"/>
<resultMap id="originPage_result" class="originPage">
    <result property="id" column="id"/>
    <result property="pv" column="pv"/>
    <result property="uv" column="uv"/>
    <result property="ip" column="ip"/>
    <result property="newPv" column="new_pv"/>
    <result property="newUv" column="new_uv"/>
    <result property="refererUrl" column="referer_url"/>
    <result property="urlType" column="url_type"/>
    <result property="isDate" column="is_date"/>
    <result property="createTime" column="create_time"/>
    <result property="countPv" column="count_pv"/>
    <result property="addTime" column="add_time"/>
</resultMap>

<sql id="OriginPage_Query_List_Sharing">
	<dynamic prepend="WHERE">
			<isNotEmpty prepend="and" property = "id">
				id = #id#
			</isNotEmpty>
			<isNotEmpty prepend="and" property = "pv">
				pv = #pv#
			</isNotEmpty>
			<isNotEmpty prepend="and" property = "uv">
				uv = #uv#
			</isNotEmpty>
			<isNotEmpty prepend="and" property = "ip">
				ip = #ip#
			</isNotEmpty>
			<isNotEmpty prepend="and" property = "newPv">
				new_pv = #newPv#
			</isNotEmpty>
			<isNotEmpty prepend="and" property = "newUv">
				new_uv = #newUv#
			</isNotEmpty>
			<isNotEmpty prepend="and" property = "refererUrl">
				referer_url = #refererUrl#
			</isNotEmpty>
			<isNotEmpty prepend="and" property = "urlType">
				url_type = #urlType#
			</isNotEmpty>
			<isNotEmpty prepend="and" property = "isDate">
				is_date = #isDate#
			</isNotEmpty>
			<isNotEmpty prepend="and" property = "createTime">
				create_time = #createTime#
			</isNotEmpty>
			<isNotEmpty prepend="and" property = "countPv">
				count_pv = #countPv#
			</isNotEmpty>
			<isNotEmpty prepend="and" property = "addTime">
				add_time = #addTime#
			</isNotEmpty>
	</dynamic>
</sql>

<sql id="OriginPage_List_Paramter">
	<dynamic prepend="ORDER BY">
		<isNotEmpty property = "orderItem">
			 $orderItem$ $orderType$ <!-- # and $ has difference, this place need $ -->
		</isNotEmpty>
	</dynamic>
</sql>

<sql id="OriginPage_column">
			id,
			pv,
			uv,
			ip,
			new_pv,
			new_uv,
			referer_url,
			url_type,
			is_date,
			create_time,
			count_pv,
			add_time
</sql>

<sql id="OriginPage_By_Id">
	WHERE  id = #id#
</sql> 

<insert id="addOriginPage" parameterClass="originPage" >
    INSERT INTO origin_page (
	<include refid="OriginPage_column" />
        )
    VALUES (
				#id#,
				#pv#,
				#uv#,
				#ip#,
				#newPv#,
				#newUv#,
				#refererUrl#,
				#urlType#,
				#isDate#,
				#createTime#,
				#countPv#,
				#addTime#
    )
    <!--<selectKey resultClass="long" keyProperty="id">
			select last_insert_id() as ID from origin_page limit 1
    </selectKey>-->
</insert>  

<update id="updateOriginPage" parameterClass="originPage">
    UPDATE origin_page 
    <dynamic prepend="set">
			<isNotEmpty prepend="," property = "id">
				id = #id#
			</isNotEmpty>
			<isNotEmpty prepend="," property = "pv">
				pv = #pv#
			</isNotEmpty>
			<isNotEmpty prepend="," property = "uv">
				uv = #uv#
			</isNotEmpty>
			<isNotEmpty prepend="," property = "ip">
				ip = #ip#
			</isNotEmpty>
			<isNotEmpty prepend="," property = "newPv">
				new_pv = #newPv#
			</isNotEmpty>
			<isNotEmpty prepend="," property = "newUv">
				new_uv = #newUv#
			</isNotEmpty>
			<isNotEmpty prepend="," property = "refererUrl">
				referer_url = #refererUrl#
			</isNotEmpty>
			<isNotEmpty prepend="," property = "urlType">
				url_type = #urlType#
			</isNotEmpty>
			<isNotEmpty prepend="," property = "isDate">
				is_date = #isDate#
			</isNotEmpty>
			<isNotEmpty prepend="," property = "createTime">
				create_time = #createTime#
			</isNotEmpty>
			<isNotEmpty prepend="," property = "countPv">
				count_pv = #countPv#
			</isNotEmpty>
			<isNotEmpty prepend="," property = "addTime">
				add_time = #addTime#
			</isNotEmpty>
	</dynamic>
    <include refid="OriginPage_Query_List_Sharing" />
</update> 

<select id="findOriginPage" resultMap="originPage_result" parameterClass="java.util.HashMap">
    SELECT
     	<include refid="OriginPage_column" />      
    FROM origin_page
   <include refid="OriginPage_Query_List_Sharing" />
</select>

<select id="findByIdOriginPage" resultMap="originPage_result" parameterClass="java.lang.Long">
    SELECT
     	<include refid="OriginPage_column" />      
    FROM origin_page
    <include refid="OriginPage_By_Id" />
</select>

<select id="listOriginPage" resultMap="originPage_result" parameterClass="java.util.HashMap">
    SELECT
         <include refid="OriginPage_column" />  
    FROM origin_page
	<include refid="OriginPage_Query_List_Sharing" />
	<include refid="OriginPage_List_Paramter" />
	limit #begin#,#pageSize#
</select>


<select id="listOriginPageCount" resultClass="java.lang.Integer" parameterClass="java.util.HashMap">
    SELECT
		COUNT(*)
   	FROM origin_page
	<include refid="OriginPage_Query_List_Sharing" />
</select>

<delete id="delOriginPage" parameterClass="originPage">
    DELETE  FROM  origin_page 
    <include refid="OriginPage_By_Id" />
</delete>  

</sqlMap>
